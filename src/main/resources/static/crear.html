<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
  <meta charset="UTF-8">
  <title>SUCODER - Generador de Código Java</title>

  <link rel="stylesheet" type="text/css" href="/css/style.css">
  <link rel="stylesheet" type="text/css" href="/css/menu.css">
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>

</head>
<body>

<header>
  <a href="/index.html">
    <img src="images/SUCODER2.png" alt="SUCODER Logo" style="height: 105px;">
  </a>
  <div class="button-container">
    <button id="verLetraButton" type="button" class="button" data-bs-toggle="modal" data-bs-target="#descripcionModal" style="width: 150px;">Ver Letra</button>
  </div>
  <div class="navbar">
    <span id="modoMensaje" style="font-size: 1.50rem;"></span>
  </div>
  <nav class="navbar">
    <span id="userName" style="font-size: 1.50rem;"></span>
  </nav>
</header>

<!-- LETRA Modal -->
<div class="modal fade" id="descripcionModal" tabindex="-1" role="dialog" aria-labelledby="descripcionModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
    <div class="modal-content" style="background-color: black; border: .2rem solid #fff;">
      <div class="modal-header">
        <h5 class="modal-title" id="descripcionModalLabel" style="color: white;">Letra</h5>
        <button type="button" class="custom-close-button" data-bs-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div><br>
      <div class="modal-body">
        <div class="exercises-descripcion">
          <textarea id="descripcion" readonly></textarea>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="space"></div>

<section id="buttons" class="buttons">
  <div class="buttons-container">
    <div class="buttons-box"><br>
      <i class='bx bx-code-curly'></i><br>
      <h3>Crear Procedimiento</h3><br>
      <p>Haz clic en este botón para generar un nuevo procedimiento Java.</p><br>
      <a href="#" class="btn-box" id="generarProcedimientoBtn">Generar Procedimiento</a>
    </div>
    <div class="buttons-box"><br>
      <i class='bx bx-code' ></i><br>
      <h3>Crear Código Principal</h3><br>
      <p>Haz clic en este botón para generar el código principal Java.</p><br>
      <a href="#" class="btn-box" id="generarCodigoBtn">Generar Código Principal</a>
    </div>
  </div>

</section>

<script src="js/bootstrap.min.js"></script>
<script src="/js/sweetalert.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<!-- JavaScript section in crear.html -->
<script>
    // Function to extract query parameters from URL
    function getQueryParam(name) {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get(name);
    }

    // Update the mode message and exercise description
    const modo = getQueryParam('modo');
    const sessionName = getQueryParam('sesion'); // Get the session name from the URL

    if (modo === 'Ejercicio') {
        const exerciseName = getQueryParam('exerciseName');
        const exerciseDescription = getQueryParam('exerciseDescription');

        const userNameElement = document.getElementById('userName');
        userNameElement.innerHTML = sessionName ? `<i class='bx bxs-user'></i> ${sessionName}` : 'Usuario Desconocido';

        // Update the "modoMensaje" element to show the exercise description
        const modoMensaje = document.getElementById('modoMensaje');
        modoMensaje.innerHTML = `<i class="bx bx-dumbbell"></i> Modo Ejercicio`;

        // Update the "descripcion" element with the exercise description
        const descripcionElement = document.getElementById('descripcion');
        descripcionElement.textContent = `${exerciseDescription}`;

        // Show the "Ver Letra" button
        const verLetraButton = document.getElementById('verLetraButton');
        verLetraButton.style.display = 'block';
    } else if (modo === 'Libre') {

        const userNameElement = document.getElementById('userName');
        userNameElement.innerHTML = sessionName ? `<i class='bx bxs-user'></i> ${sessionName}` : 'Usuario Desconocido';

        // Update the "modoMensaje" element for "Modo Libre"
        const modoMensaje = document.getElementById('modoMensaje');
        modoMensaje.innerHTML = '<i class="bx bx-compass"></i> Modo Libre';

        // Hide the "Ver Letra" button when in "Modo Libre"
        const verLetraButton = document.getElementById('verLetraButton');
        verLetraButton.style.display = 'none';
    }

    // Modify the link to procedimiento.html and codigo.html based on mode
const urlParams = new URLSearchParams(window.location.search);
const exerciseName = urlParams.get('exerciseName');
const exerciseDescription = urlParams.get('exerciseDescription');
let procedimientoLink = '';
let codigoLink = '';

if (modo === 'Ejercicio') {
    procedimientoLink = `procedimiento.html?modo=${modo}&sesion=${encodeURIComponent(sessionName)}&exerciseName=${encodeURIComponent(exerciseName)}&exerciseDescription=${encodeURIComponent(exerciseDescription)}`;
    codigoLink = `codigo.html?modo=${modo}&sesion=${encodeURIComponent(sessionName)}&exerciseName=${encodeURIComponent(exerciseName)}&exerciseDescription=${encodeURIComponent(exerciseDescription)}`;
} else if (modo === 'Libre') {
    procedimientoLink = `procedimiento.html?modo=${modo}&sesion=${encodeURIComponent(sessionName)}`;
    codigoLink = `codigo.html?modo=${modo}&sesion=${encodeURIComponent(sessionName)}`;
}

const generarProcedimientoBtn = document.getElementById('generarProcedimientoBtn');
const generarCodigoBtn = document.getElementById('generarCodigoBtn');

generarProcedimientoBtn.href = procedimientoLink;
generarCodigoBtn.href = codigoLink;
</script>



</body>
</html>